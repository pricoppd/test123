- name: Debug get_ad_credentials before lookup
  debug:
    var: get_ad_credentials
  # This should show the initial value of get_ad_credentials before the lookup.

- name: Retrieve AD credentials from HashiCorp Vault
  set_fact:
    get_ad_credentials: "{{ lookup('hashi_vault', 'secret=secrets/kv/GFPD/gfpd1 token=' + client_token + ' url=' + host_url + ' namespace=' + hvnamespace) }}"
  # Add a debug task here to check the value of get_ad_credentials after the lookup.

- name: Debug get_ad_credentials after lookup
  debug:
    var: get_ad_credentials
  # This should show the value of get_ad_credentials after the lookup.
